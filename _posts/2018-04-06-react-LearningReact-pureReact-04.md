---
layout: post
title: "러닝 리액트(Learning React) - 4. 순수 리액트"
categories: react
tags: react
---

###### \<Learning React>, Alex Banks, Eve Porcello 저 | 오현석 역

<br>

## CHAPTER 04 순수 리액트

- 순수 리액트를 살펴보지 않고도 리액트를 완벽히 활용할 수 있다.
- 하지만 리액트 내부에서 어떤 일이 벌어지는지 이해하기 위해 시간을 투자한다면 더 효율적인 리액트 프로그래머가 될 수 있다. 리액트 코드를 디버깅해야 하는 경우 특히 더 그렇다.

<br>

### 페이지 설정

- 리액트를 브라우저에서 다루려면 React와 ReactDOM 라이브러리를 불러와야 한다.
- React는 뷰를 만들기 위한 라이브러리이고, ReactDOM은 UI를 실제로 브라우저에 렌더링할 때 사용하는 라이브러리이다.
- ReactDOM이 UI를 렌더링하기 위해 사용할 HTML 엘리먼트가 필요하다.

<br>

### 가상 DOM

- 가상 DOM은 리액트가 사용자 인터페이스를 생성하고 갱신하는 방법을 알려주는 명령이다. 이런 명령은 리액트 엘리먼트라는 JS 객체로 이루어진다.

- HTML은 브라우저가 문서 객체 모델(DOM)을 구성하기 위해 따라야 하는 절차라고 말할 수 있다.
- HTML 문서를 이루는 엘리먼트는 브라우저가 HTML 문서를 읽어 들이면 DOM 엘리먼트가 되고, 이 DOM이 화면에 사용자 인터페이스를 표시한다.
- AJAX가 생기면서 단일 페이지 앱(SPA)이 생겼다.
- 브라우저가 AJAX를 사용해 아주 작은 데이터를 요청해서 가져올 수 있게 됨에 따라 전체 웹 애플리케이션이 한 페이지로 실행되면서 JS에 의존해 사용자 인터페이스를 갱신할 수 있게 되었다.
- SPA에서 처음에 브라우저는 HTML 문서를 하나 적재한다. 사용자는 사이트를 내비게이션하지만 실제로는 같은 페이지 안에 계속 머문다. JS는 사용자가 애플리케이션과 상호작용하는 것에 맞춰 표시 중이던 인터페이스를 없애고 새로운 사용자 인터페이스를 만든다. 사용자가 느끼기에는 한 페이지에서 다른 페이지로 이동한 것 같지만 실제로는 여전히 같은 HTML 페이지 안에 머물 뿐이고 JS가 모든 힘든 처리를 대신 해준다.
- DOM API는 브라우저의 DOM을 변경하기 위해 JS가 사용할 수 있는 객체의 모음이다.
- document.createElement나 document.appendChild를 써봤다면 이미 DOM을 써본 것이다.
- 리액트는 브라우저 DOM을 갱신하기 위해 만든 라이브러리이다.
- 리액트가 모든 처리를 대신 해주기 때문에 더 이상 SPA를 더 효율적으로 만들기 위해 여러 복잡한 내용을 신경 쓸 필요 없다.
- 가상 DOM은 리액트 엘리먼트로 이루어진다.
- 리액트 엘리먼트는 개념상 HTML 엘리먼트와 비슷하지만 실제로는 JS 객체이다.
- 가상 DOM을 변경하면 리액트는 DOM API를 사용해 변경사항을 가장 효율적으로 렌더링해준다.

<br>

### 리액트 엘리먼트

- 브라우저 DOM은 DOM 엘리먼트로 이루어진다.
- 리액트 DOM은 리액트 엘리먼트로 이루어진다.
- 리액트 엘리먼트는 브라우저 DOM을 만드는 방법을 알려주는 명령이다.
- 리액트 엘리먼트는 리액트가 DOM 엘리먼트를 구성하는 방법을 알려주는 JS 리터럴일 뿐이다.
- 리액트 엘리먼트에서는 key와 ref 필드가 중요하다.

<br>

### ReactDOM

- ReactDOM에는 리액트 엘리먼트를 브라우저에 렌더링하는 데 필요한 모든 도구가 들어 있다.

<br>

### 자식

- ReactDOM에서는 항상 한 엘리먼트만 DOM으로 렌더링할 수 있다.
- 가상 DOM은 단일 루트로부터 뻗어 나온 리액트 엘리먼트의 트리다.
- 리액트 엘리먼트는 리액트가 브라우저에서 UI를 어떻게 구성할지 지시하는 명령이다.

<br>

### 데이터로 엘리먼트 만들기

- 리액트 사용의 가장 큰 장점은 UI 엘리먼트와 데이터를 분리할 수 있다는 것이다.

<br>

### 리액트 컴포넌트

- 모든 사용자 인터페이스는 여러 부분으로 이루어진다. 리액트에서 이런 각 부분을 **컴포넌트**라 부른다.
- 컴포넌트를 사용하면 서로 다른 데이터 집합에 같은 DOM 구조를 재사용할 수 있다.
- 리액트로 만들고 싶은 사용자 인터페이스를 생각할 때는 엘리먼트를 재사용 가능한 조각으로 나눌 수 있는지 고려해보라.
- 컴포넌트를 만드는 3가지 방법
  1. createClass를 사용하는 방법
  2. ES6 클래스를 사용하는 방법
  3. 상태가 없는 함수형 컴포넌트를 사용하는 방법
- 컴포넌트를 사용하면 데이터로부터 재사용 가능한 UI를 만들 수 있다.
- render 함수에서 this 키워드를 사용해 컴포넌트 인스턴스를 가리킬 수 있고, 그 인스턴스의 프로퍼티를 this.props로 접근할 수 있다.
- 컴포넌트는 객체다. 따라서 일반 JS 클래스와 마찬가지로 내부에 코드를 캡슐화할 수 있다.

<br>

#### React.createClass

- 리액트 팀은 향후 언젠가는 createClass를 사용 중단시킬 예정이라고 한다.

<br>

#### React.Component

- 리액트 컴포넌트를 새로 만들 때는 React.Component를 추상 클래스로 사용할 수 있다.
- ES6 구문으로 이 추상 클래스를 상속하면 커스텀 컴포넌트를 만들 수 있다.

```react
class IngredientsList extends React.Component {
   renderListItem(ingredient, i) {
      return React.createElement("li", {key: i}, ingredient)
   }
   
   render() {
      return React.createElement("ul", {className: "ingredients"},
			this.props.items.map(this.renderListItem)
		)
   }
}
```

<br>

#### 상태가 없는 함수형 컴포넌트

- 상태가 없는 함수형 컴포넌트는 객체가 아니라 함수다. 따라서 그런 컴포넌트 영역에는 'this'가 없다.
- 상태가 없는 함수형 컴포넌트가 충분히 튼튼하지 못한 경우 class나 createClass로 돌아가야 할 것이다. 하지만 일반적으로는 상태가 없는 함수형 컴포넌트를 더 많이 사용할수록 더 좋다.
- 상태가 없는 함수형 컴포넌트는 프로퍼티를 인자로 받아서 DOM 엘리먼트를 반환하는 함수다.
- 상태가 없는 함수형 컴포넌트는 함수형 프로그래밍의 원칙을 연습하기 좋은 방법이다.
- 그들은 프로퍼티를 인자로 받아서 부수 효과 없이 결과 DOM 엘리먼트를 만들어낸다.
- 코드가 더 단순해지고 코드 베이스를 훨씬 더 잘 테스트 할 수 있다.
- 리액트 팀은 상태가 없는 함수형 컴포넌트를 사용할 때 성능이 더 좋아진다고 말한다.
- 기능을 캡슐화해야 하거나 this가 필요하면 사용할 수 없다.
- 이 컴포넌트는 단지 함수에 불과하다.
- 이 함수는 props를 인자로 받아서 props 안에 있는 데이터가 원소인 번호가 붙어 있지 않은 리스트를 만들어 반환한다.

```react
const IngredientsList = props =>
	React.createElement("ul", {className: "ingredients"},
		props.items.map((ingredient, i) =>
			React.createElement("li", {key: i}, ingredient)
	)
)
```

<br>

### DOM 렌더링

- 데이터를 컴포넌트에 프로퍼티로 넘길 수 있으므로 UI를 만들 때 사용하는 로직과 데이터를 분리할 수 있다.
- 엘리먼트를 DOM에 삽입하는 것은 DOM API 연산 중 가장 비싼 연산이다. 즉, DOM 엘리먼트 삽입은 느리다.
- 반면 이미 제 위치에 있는 DOM 엘리먼트를 갱신하면 새로운 엘리먼트를 삽입하는 것보다 훨씬 더 빠르다.
- ReactDOM.render는 현재 DOM을 그대로 두고 갱신이 필요한 DOM 엘리먼트만 변경한다.
- ReactDOM은 가능한 한 (비용이 가장 비싼) DOM 삽입을 최소화하기 위해 노력한다.
- 애플리케이션의 상태가 자주 바뀌기 때문에 리액트가 수긍할만한 시간 안에 제대로 작동하게 하려면 이런 식의 영리한 DOM 렌더링이 필요하다.
- 애플리케이션의 상태가 변할 때마다 ReactDOM.render에 의존해 UI를 효율적으로 렌더링한다.

<br>

