---
layout: post
title: "캐시 메모리 (Cache Memory)"
categories: dev
tags: etc
---

## Cache Memory

###### 캐시 메모리

- 컴퓨터 시스템의 성능을 향상시키기 위해 CPU 칩 안에 포함되는 빠르고 작고 매우 비싼 메모리이다.
- 데이터를 미리 복사해 놓는 임시 장소를 가리킨다.
- 프로그램에서 직접적으로 읽거나 쓸 수 없고, 하드웨어의 메모리 관리 시스템이 내부적으로 제어한다.
- 대부분 프로그램은 한 번 사용한 데이터를 다시 사용할 가능성이 높고, 그 주변의 데이터도 곧 사용할 가능성이 높은 데이터 지역성을 가지고 있다.
- 데이터 지역성을 활용해서 메인 메모리에 있는 데이터를 캐시 메모리에 불러와 두고, CPU가 필요한 데이터를 캐시에서 먼저 찾도록 하면 시스템 성능을 향상시킬 수 있다.
- 캐시에 데이터를 미리 복사해 놓으면, 계산이나 접근 시간 없이 더 빠른 속도로 데이터에 접근할 수 있다.

<br>

###### example:

- 캐시(Cache)는 `지갑`이라고 생각하면 된다.
- 지갑 혹은 주머니가 없다면 현금(Cash)이 필요할 때마다 매번 은행이나 ATM에 가야 할 것이다.
- 하지만 현금을 지갑에 넣고 다님으로써 시간을 절약할 수 있다.

<br>

###### 메모리 기술은 주로 DRAM 기술, SRAM 기술로 나뉜다.

- `DRAM`
  - Danymic RAM.
  - 동적 RAM은 SRAM보다 느리지만, 구조가 간단해서 집적도를 쉽게 높일 수 있다.
  - 우리가 말하는 모든 RAM은 전부 DRAM이다.
- `SRAM`
  - Static RAM.
  - 정적 RAM은 내용을 한 번 기록하면, 전원이 공급되는 한 내용을 그대로 가지고 있는 RAM이다.
  - 정적 RAM은 DRAM의 100배 이상으로 접근 속도가 빠르지만, 구조가 복잡해서 공간을 많이 차지하므로, 집적도를 높이기 어려워 가격이 비싸고 대용량으로 제작하기가 어렵다.
  - 따라서 빠른 속도가 요구되는 `캐시 메모리(Cache Memory)`에 주로 사용된다.
  - CPU 속도와 같은 속도로 동작하기 때문에 속도를 따로 표기하지 않는다.

<br>

###### 작동 원리

- 캐시 메모리는 `데이터 지역성(Locality)`의 원리를 사용한다.
- 데이터 지역성은 시간 지역성(Temporal Locality)과 공간 지역성(Spatial Locality)으로 나뉜다.
- CPU가 메모리에 데이터를 요청할 때, DRAM에 접근하기 전에 일단 캐시 메모리에 접근해서 데이터 존재 여부를 확인한다.
- 캐시 메모리는 메인 메모리인 DRAM보다 사이즈가 매우 작아서 데이터를 모두 저장할 수 없다.
- 캐시 메모리는 DRAM의 데이터 일부를 가지고 있다가, CPU가 요청한 데이터가 캐시 메모리에 없으면 CPU를 잠시 기다리게 한 후, DRAM에서 해당 데이터를 가져온 후 CPU에게 넘겨준다.
- CPU는 캐시의 존재를 알고 있지만, 그 위에서 실행되는 프로그램은 메모리 주소만 지정할 수 있지 프로그래머가 캐시를 직접 지정할 수는 없다.
- 캐시에 데이터를 저장할 때 공간 지역성을 최대한 활용하기 위해 해당 데이터뿐만 아니라, 옆 주소의 데이터도 같이 가져와 미래에 쓰일 것을 대비한다.
- CPU가 데이터를 요청했을 때, 캐시 메모리가 해당 데이터를 가지고 있다면 이를 `캐시 히트`라 부르고, 해당 데이터가 없어서 DRAM에서 가져와야 한다면 `캐시 미스`라 부른다.
- 만약 대부분의 메모리 요청이 캐시 미스라면, 캐시 메모리를 안 쓰는 게 더 빠르다.
- 하지만 캐시 미스 비율이 대체로 평균 10% 안쪽이기 때문에 캐시 메모리를 통해 컴퓨터 시스템의 평균 성능을 크게 향상시킬 수 있으며 클럭 속도, 코어 개수와 함께 컴퓨터 성능에서 매우 큰 비중을 차지한다.
- 캐시 메모리의 작동 원리가 도박에서 돈을 거는 것과 유사하기 때문에, 도박의 원리라고도 한다.
- 캐시 미스 비율이 매우 낮아 거의 이기는 도박이라 할 수 있다.

<br>

###### [위키백과](https://ko.wikipedia.org/wiki/%EC%BA%90%EC%8B%9C), [나무위키](https://namu.wiki/w/%EC%BA%90%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC) 참조