---
layout: post
title: "NoSQL 철저 입문"
categories: dev
tags: books
---

###### 댄 설리번 저 | 홍형경 역

<br>

#### 지은이의 말

- NoSQL 데이터베이스는 요구 사항을 충족하지 못해 생겨났다.
- 이론적으로 단단한 기반에서 잘 정비된, 별 문제 없이 사용해 온 관계형 데이터 모델조차 도움의 손길이 필요해졌다.
- 관계형 데이터베이스는 여전히 필요하며 NoSQL 데이터베이스로 대체될 위험에 직면하지는 않았다.

<br>

#### 옮긴이의 말

- 지난 수십 년간 데이터베이스 관리 시스템(DBMS)이라고 하면 관계형 데이터베이스 관리 시스템(RDBMS)을 가리킨다고 해도 과언이 아니었다.
- 트위터, 페이스북 같은 SNS의 등장과 스마트폰의 대중화는 데이터베이스 관리 시스템의 패러다임을 바꾸는 계기가 되었다. 전 세계 수억 명의 개인 사용자가 순식간에 엄청난 양의 데이터를 생산해 냈고, 관계형 데이터베이스 시스템이 이런 빅데이터를 처리하기에는 역부족이었다. 이 한계를 극복하고자 다른 형태의 데이터 관리 시스템을 고민하면서 탄생한 것이 바로 NoSQL이다.
- 대표적인 NoSQL의 특징으로는 `분산처리`, `고정되지 않은 스키마`, `고가용성`, `고확장성` 등이 있다.
- 구글과 아마존을 시작으로 MongoDB, 카산드라, HBase를 비롯해 많은 NoSQL 데이터베이스가 세상에 선보였다.
- 오라클, MS-SQL, MySQL 같은 기존의 관계형 데이터베이스는 제품의 종류가 달라도 SQL만 알면 적응해 무리 없이 사용했다. 하지만 NoSQL은 종류별로 특성이 다르다.

<br>

#### 들어가기

- 시대는 변했다. 데이터베이스 관리 시스템은 더는 관계형 데이터베이스와 동의어가 아니다.
- 관계형 데이터베이스는 배송과 계좌 잔고를 관리하는 비즈니스 니즈부터 박테리아와 인간 질병을 연구하는 과학자의 요구 사항까지 만족해 왔다.
- 관계형 데이터베이스는 데이터를 논리적으로 구성하고 쉽게 추출할 수 있다.
- 관계형 데이터베이스의 중요한 특징 중 하나는 데이터베이스에서 데이터 변경 작업이 아무리 자주 수행되더라도 여러 사용자에게 일관된 데이터를 제공해주는 능력이다.
- 가장 최신 세대의 데이터 관리 도구가 바로 NoSQL 데이터베이스다.
- NoSQL이라는 명칭은 이 데이터베이스 시스템이 현재의 데이터베이스 시스템을 대신하지 않는다는 사실을 암시한다.
- NoSQL 데이터베이스는 키-값 문서, 칼럼 패밀리, 그래프 데이터베이스 등 네 가지 범주로 나뉜다.
- 키-값 데이터베이스는 식별자(또는, '키')를 사용하여 자료(또는, '값')를 저장하고 검색할 수 있게 해주는 간단한 모델을 사용한다.
- 문서 데이터베이스는 키-값 데이터베이스의 아이디어를 확장해 키-값의 묶음인 문서라는 논리 구조로 구성한다.
- 칼럼 패밀리 데이터베이스는 겉보기에는 관계형 데이터베이스와 비슷하다. 칼럼 패밀리 데이터베이스는 가장 크고 까다로우며 데이터 집약적인 성격을 가진 일부 애플리케이션에서 사용된다.
- 그래프 데이터베이스는 네트워크, 즉 연결 관계를 모델링하는 데 적합하며, 컴퓨터 간의 통신부터 사람들 사이의 상호 교류까지 사용 범위가 넓다.

<br>

## 제1부 NoSQL 데이터베이스 개요

<br>

### 1장 요구 사항에 따른 데이터베이스의 종류

- 정보 기술의 역사는 더 늘어난 데이터 스토리지 용량과 더 빨라진 데이터 계산 속도에 관한 이야기라 할 수 있다.
- 지난 20년간 데이터베이스 관리 시스템을 사용해 본 사람이라면 '데이터 관리'가 곧 '관계형 데이터베이스 관리 시스템'이라 생각하겠지만, 사실은 그렇지 않다.
- 최근 데이터 관리 기술계는 새로운 유형의 문제를 발견했고 이를 해결하기 위해 새로운 종류의 데이터 관리 시스템을 개발했다. 이를 통칭하여 NoSQL 데이터베이스라고 한다.
- NoSQL은 관계형 데이터베이스 관리 시스템에서 사용하는 언어인 SQL(시퀄이라고 읽는다)에서 명칭을 따왔다.
- NoSQL의 'No'는 글자 그대로 '데이터베이스에서 SQL이 사용되지 않는다'는 의미이기도 하고, 'SQL만 있는 게 아니다'는 뜻도 담고 있다.

<br>

#### 관계형 데이터베이스 설계

- 예를 들어 예금계좌에서 출금계좌로 100만 달러를 이체하려면 두 단계가 필요하다. 먼저 예금계좌에서 100만 달러를 인출하고, 그런 다음 출금계좌로 100만 달러를 넣어야 한다. 예금계좌에서 100만 달러를 인출했지만 출금계좌에 100만 달러가 입금되지 않은 상태에서 전 계좌의 잔고를 조회한다면 100만 달러가 사라졌을 것이다. 관계형 데이터베이스는 이렇게 예금계좌에서 인출해 다시 출금계좌에 입금하는 것을 단일 작업인양 그룹으로 묶을 수 있다. 만약 계좌 잔고를 조회하더라도 이체 전이나 이체 후의 잔고를 볼 수 있을 뿐, 그 중간 단계의 잔고는 볼 수 없다.

<br>

#### 초기 데이터베이스 관리 시스템

###### 플랫 파일 데이터 관리 시스템

- 구조화된 데이터 세트를 파일 하나로 만들어서 디크스나 자기 테이프 같은 장기기억 저장 장치에 저장하는 방식이다.
- 플랫 파일 관리 시스템의 문제점은 비밀을 유지해야 하는 일부 사용자 정보가 담긴 파일을 공유하기 어렵다는 것이다. 이 시나리오에서 가장 간단한 해결책은 사원 파일을 두 개, 즉 급여 데이터가 포함된 것과 포함되지 않은 파일로 나눠 만드는 것이다. 하지만 이 해결책은 또 다른 문제점을 낳는다. 두 파일에 있는 데이터가 일치하지 않을 수 있다.
- 플랫 파일 데이터 관리 시스템의 한계점
  - 고객 ID처럼 파일에 데이터가 저장된 방식 이외의 다른 방식으로 데이터에 접근하는 것은 비효율적이다.
  - 파일 구조가 변하면 이를 사용하는 프로그램도 변경해야 한다.
  - 데이터의 종류에 따라 보안 요구 사항이 달라진다.
  - 데이터가 파일 여러 개에 각각 저장되어 있다면 이들 데이터 간의 일관성은 유지하기 어렵다.
- 이러한 플랫 파일 데이터 관리 시스템의 한계를 극복하기 위해 계층형 데이터 모델과 네트워크 데이터 모델 시스템이 개발되었다.

<br>

###### 계층형 데이터 모델 시스템

- 계층형 데이터 모델은 부모-자식 관계의 계층 구조로 데이터를 구성하여 검색 문제를 해결한다.
- 계층형 구조는 루트 노드에서 시작하며 루트 노드는 레코드나 데이터 노드의 최상위 계층(top layer)에 연결된다.
- 최상위 계층 레코드는 자식 레코드를 갖는데 이 자식 레코드에는 부모 레코드에 대한 정보가 있다.
- 계층형 모델은 플랫 파일보다 검색 효율성이 좋다.
- 계층형 데이터 관리 시스템은 관리하는 엔터티가 부모-자식 관계, 특히 부모 하나에 자식이 여러 개일 때 잘 작동한다.
- 두 명의 동업자가 단기 사업자금을 대출받은 경우처럼 한 건의 대출에 두 고객이 엮인 경우는 표현하기가 그리 쉽지 않다.
- 같은 대출에 두 고객이 연결되어 있으면 계층형 데이터 관리 시스템은 두 고객의 대출 정보를 복제해야만 하는데, 이때 세 가지 문제가 발생한다.
  1. 데이터를 복제하느라 저장 공간을 비효율적으로 사용한다.
  2. 플랫 파일 관리 시스템의 중복 데이터 문제처럼 데이터 변경 사항을 제대로 관리하지 않는다면 모든 복사본의 데이터 간 일관성을 훼손할 수 있다.
  3. 데이터를 집계하면서 오류가 발생할 수도 있다. 단순히 모든 대출 레코드를 읽어 대출총액을 합산해서는 체납된 대출금의 총액을 구할 수 없다.
- 계층형 모델의 한계를 해결하기 위해 데이터 관리 시스템 설계자들은 네트워크 데이터 모델 시스템으로 눈을 돌렸다.

<br>

###### 네트워크 데이터 관리 시스템

- 네트워크는 서로 연결된 데이터 레코드로 구성되어 있다.
- 데이터 레코드를 노드(node)라 하고 연결 정보를 엣지(edge), 노드와 엣지의 묶음을 그래프(graph)라고 한다.
- 엣지는 방향성으로 부모-자식 관계를 표현한다. 이러한 부모-자식 관계를 일대다(one-to-many) 관계라고 한다.
- 네트워크 데이터 모델에서는 대출 한 건에 고객 두 명이 연결된 것처럼 부모가 여럿일 수 있다. 또한, 데이터를 복제하지 않고도 대출 두 건을 가진 두 명의 고객을 표현할 수도 있는데, 이를 다대다(many-to-many) 관계라고 한다.
- 그래프에서 순환할 수 없다는 제약 조건이 있다. 즉, 한 노드에서 출발해서 다른 노드로 이어지는 링크를 따라가고, 다시 두 번째 노드에 연결된 링크를 따라가는 식이어서 출발한 노드로 절대 돌아올 수 없다. 단방향 엣지이면서 순환하지 않는 그래프를 단방향 비순환 그래프라고 한다.
- 다른 노드와 연결할 수 있는 종류의 노드를 스키마(schema)라고 한다.
- 네트워크 데이터베이스는 설계와 관리가 어렵다는 한계가 있다. 데이터 모델이 복잡해지면 링크 개수와 경로 길이도 크게 증가하게 된다.
- 네트워크 데이터베이스가 배포된 후 데이터베이스 설계자가 다른 엔터티나 노드 유형이 필요하다고 판단하면 이 네트워크 데이터베이스에 접근하는 프로그램도 수정되어야 한다. 스키마와 데이터베이스에 노드를 추가하면 프로그램이 특정 노드에 접근하기 위해 방문해야 하는 경로도 달라진다.

<br>

###### 초기 데이터 관리 시스템 요약

- 플랫 파일 데이터베이스는 단일 레코드에 단일 엔터티가 결합된 형태로 데이터를 저장한다. 구조는 단순하지만 데이터 중복과 비효율적인 검색 문제를 일으킬 수 있다. 또한 기밀 데이터를 보호하기 위한 보인 기능을 구현하기가 어렵다.
- 계층형 데이터 관리 시스템은 부모-자식 관계를 허용한다. 이는 부모에 관해 중복 데이터를 방지하는 데 도움이 된다. 한 부모 레코드에 복사본이 하나만 필요하기 때문이다. 데이터가 서로 다른 레코드로 구성되므로 좀 더 효율적으로 데이터를 조회할 수 있다.
- 네트워크 데이터 관리는 부모를 여러 개 두는 것으로 계층형 데이터베이스보다 개선된 방식이다. 또한, 노드 유형 간에 유효한 관계를 정의하는 스키마를 네트워크 데이터 관리 시스템에 통합했다.
- 데이터베이스 구조가 바뀔 때 프로그램도 변경해야 하는 이유는 데이터베이스의 논리 구조와 테이프나 디스크에 물리적으로 데이터가 저장되는 방식이 독립적이지 못하기 때문이다.

<br>

#### 관계형 데이터베이스의 혁명

- 관계형 데이터베이스는 데이터와 데이터 간의 관계를 묘사하기 위해 관계형 대수학을 사용하는 형식 수학 모델에 기반을 두고 있다.

<br>

###### 관계형 데이터베이스 관리 시스템

- 관계형 데이터베이스 관리 시스템은 데이터를 관리하고 애플리케이션 사용자들이 데이터를 읽고 추가, 갱신, 삭제하는 것을 허용하는 다수의 프로그램으로 구성된 애플리케이션이다.
- 관계형 데이터베이스 관리 시스템은 데이터 관리에 공통 언어를 사용하도록 설계됐다. 이 언어를 SQL이라고 하며, 관계형 데이터베이스 관리 시스템에서 표준으로 사용된다.
- SQL은 종종 '관계형'에 대한 약칭으로 사용되기도 한다.
- RDBMS를 구현하기 위한 최소 요구 사항 네 가지
  - 스토리지 관리 프로그램
  - 메모리 관리 프로그램
  - 데이터 사전
  - 질의(query) djsdj

<br>

###### 스토리지 관리 프로그램

- 



























